{% extends "layout.html" %}
{% set activepage = "home" %}
{% block title %}Messenger Secure - Create{% endblock %}

{% block content %}
<h1 class="border-bottom border-success">New self-destructing-encrypted message</h1>

<p class="alert alert-info">Message is encrypted before being sent to the server and decryption key
is never sent to the server. More information in <a href="/about">about</a> page.</p>

<div class="h-100 p-4 text-white bg-dark rounded-3" id="creator">
    <div>
        <textarea id="message" class="bg-dark text-white"></textarea>
    </div>

    <div>
        <button type="button" class="btn btn-primary" onclick="msgur(true);">Encrypt and Send</button>
        <button type="button" class="btn btn-secondary" onclick="msgur(false);">Encrypt Only</button>
    </div>
</div>

<br>

<div class="h-100 p-4 rounded-3 m-4 d-none" id="url-box">
<div class="input-group mb-3">
    <span class="input-group-text" id="addon-wrapping">URL</span>
    <input type="text" class="form-control" id="url">
    <button id="copy-btn" class="btn btn-success" type="button" onclick="copyurl();">Copy</button>
</div>
</div>

<div class="row align-items-md-stretch d-none" id="summary">
    <div class="col-md-6">
        <div class="h-100 p-4 bg-success rounded-3 bg-opacity-25">
            <h2>Encryption Key</h2>
            <p>This is the key used to encrypt your message. This key is generated by
            your browser and is never sent to the server. This key is required to decrypt the message.</p>
            <code id="key"></code>
        </div>
    </div>
    <div class="col-md-6">
        <div class="h-100 p-4 bg-success border rounded-3 bg-opacity-25">
            <h2>Encrypted Message</h2>
            <p>This is your encrypted message, exactly how it will be saved in the server database. Without
            the key, the message cannot be decrypted.</p>
            <code id="encrypted"></code>
        </div>
    </div>
</div>
{% endblock %}
